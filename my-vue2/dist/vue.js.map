{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parse.js","../src/compiler/index.js","../src/observer/dep.js","../src/observer/queueWatcher.js","../src/observer/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\nfunction genProps(attrs) {\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i]; // name,value\r\n        if (attr.name === 'style') {\r\n            let obj = {};\r\n            attr.value.split(';').forEach(item => {\r\n                let [key, value] = item.split(':');\r\n                obj[key] = value\r\n            });\r\n            attr.value = obj; // {style:{color:red}}\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},` // {a:'aaa',a:1,b:2,}\r\n    }\r\n    return `{${str.slice(0,-1)}}`;\r\n}\r\n\r\nfunction genChildren(el) {\r\n    const children  = el.children;\r\n    if(children){\r\n        return children.map(child=>gen(child)).join(',')\r\n    }\r\n}\r\nfunction gen(node){ // 区分是元素 还是文本\r\n    if(node.type == 1){\r\n        return generate(node);\r\n    }else{\r\n        //文本 逻辑不能用 _c来处理\r\n        // 有{{}} 普通文本  混合文本 {{aa}} aaa {{bbb}} ccc\r\n        let text =  node.text;\r\n        if(defaultTagRE.test(text)){ // _v(_s(name) + 'aa' + _s(age) + '哈哈'）\r\n            let tokens = [];\r\n            let match ;\r\n            let index = 0;\r\n            let lastIndex = defaultTagRE.lastIndex = 0;\r\n            while(match = defaultTagRE.exec(text)){ // aa {{ age }} haha \r\n                index = match.index;\r\n                if(index >lastIndex){\r\n                    tokens.push(JSON.stringify(text.slice(lastIndex,index)));\r\n                }\r\n                tokens.push(`_s(${match[1].trim()})`);\r\n                lastIndex = index + match[0].length;\r\n            }\r\n            if(lastIndex < text.length){\r\n                tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n            }\r\n            return  `_v(${tokens.join('+')})`\r\n\r\n            // 是带有{{}}\r\n        }else{\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n    }\r\n}\r\nexport function generate(el) {\r\n    // console.log(el); // 转换成render代码\r\n    let children = genChildren(el);\r\n    let code = `_c('${el.tag}',${\r\n        el.attrs.length? genProps(el.attrs):'undefined'\r\n    } ${\r\n        children? (',' + children) : ''\r\n    })`;\r\n    // => js代码 html=> js代码  字符串拼接\r\n    return code;\r\n}\r\n\r\n\r\n/* \r\n<div id=\"app\" a=1 b=2>\r\n    <span style\"=color:red\">{{name}} <a>hello</a></span>\r\n</div> \r\n _c(\r\n    'div',{id:'app',a:1,b:2}\r\n    ,_c(\r\n        'span',\r\n        {style:{color:'red'}}\r\n        ,_s(_v(name)),\r\n        _c(a,undefined,_v('hello'))\r\n        )\r\n)\r\n*/","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // aa-aa \r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //aa:aa\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 可以匹配到标签名  [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //[0] 标签的结束名字\r\n//    style=\"xxx\"   style='xxx'  style=xxx\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/;\r\nconst startTagClose = /^\\s*(\\/?)>/;\r\n\r\n\r\n\r\nexport function parseHTML(html) { // <\r\n    function createASTElement(tag, attrs) { // vue3里面支持多个根元素 (外层加了一个空元素) vue2中只有一个根节点\r\n        return {\r\n            tag,\r\n            type: 1,\r\n            children: [],\r\n            attrs,\r\n            parent: null\r\n        }\r\n    }\r\n    let root = null;\r\n    let currentParent;\r\n    let stack = [];\r\n\r\n    // 根据开始标签 结束标签 文本内容 生成一个ast语法树\r\n    function start(tagName, attrs) { // [div]\r\n        let element = createASTElement(tagName, attrs);\r\n        if (!root) {\r\n            root = element;\r\n        }\r\n        currentParent = element // div>span>a   div  span\r\n        stack.push(element)\r\n    }\r\n\r\n    function end(tagName) {\r\n        let element = stack.pop();\r\n        currentParent = stack[stack.length - 1];\r\n        if (currentParent) {\r\n            element.parent = currentParent;\r\n            currentParent.children.push(element)\r\n        }\r\n    }\r\n\r\n    function chars(text) {\r\n        text = text.replace(/\\s/g, '');\r\n        if (text) {\r\n            currentParent.children.push({\r\n                type: 3,\r\n                text\r\n            })\r\n        }\r\n    }\r\n\r\n    function advance(n) {\r\n        html = html.substring(n)\r\n    }\r\n\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);\r\n        if (start) {\r\n            let match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            };\r\n            advance(start[0].length); // 获取元素 \r\n            // 查找属性\r\n            let end, attr;\r\n            //不是开头标签结尾就一直解析\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                advance(attr[0].length); // a=1 a=\"1\" a='1'\r\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] || true });\r\n            }\r\n            if (end) {\r\n                advance(end[0].length);\r\n                return match\r\n            }\r\n        }\r\n    }\r\n    while (html) {\r\n        let textEnd = html.indexOf('<');\r\n        if (textEnd == 0) {\r\n            let startTagMatch = parseStartTag();\r\n            if (startTagMatch) { // 开始标签\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue;\r\n            }\r\n            // 结束标签 \r\n            let endTagMatch = html.match(endTag);\r\n            if (endTagMatch) {\r\n                advance(endTagMatch[0].length);\r\n                end(endTagMatch[1]);\r\n                continue;\r\n            }\r\n        }\r\n        let text;\r\n        if (textEnd > 0) { // 开始解析文本\r\n            text = html.substring(0, textEnd)\r\n        }\r\n        if (text) {\r\n            advance(text.length);\r\n            chars(text);\r\n        }\r\n    }\r\n\r\n    return root;\r\n}","import { generate } from \"./generate\";\r\nimport { parseHTML } from \"./parse\";\r\nexport function compileToFunctions(template) {\r\n    let ast = parseHTML(template);\r\n    // root\r\n    let code = generate(ast); // 生成代码\r\n\r\n    let render = `with(this){return ${code}}`\r\n\r\n    let fn = new Function(render); // 可以让字符串变成一个函数\r\n\r\n    return fn; // render 函数已经ok了\r\n}","\r\nlet id = 0;\r\nclass Dep {\r\n    constructor() {\r\n        this.id = id++;\r\n        this.subs = [];//存放watcher\r\n    }\r\n    depend() {\r\n        Dep.target.addDep(this)\r\n    }\r\n    addSub(watcher) {\r\n        this.subs.push(watcher)\r\n    }\r\n    notify() {\r\n        this.subs.forEach(watcher => watcher.update())\r\n    }\r\n}\r\nDep.target = null;\r\nexport function pushTarget(watcher) {\r\n    Dep.target = watcher;\r\n}\r\nexport function popTarget() {\r\n    Dep.target = null;\r\n}\r\nexport default Dep","import Vue from \"../index\";\r\n\r\n\r\nlet has = {};\r\nlet queue = [];\r\nlet pending = false;\r\n\r\n\r\nfunction flushSchedularQueue() {\r\n    for (let i = 0; i < queue.length; i++) {\r\n        let watcher = queue[i];\r\n        watcher.run();\r\n    }\r\n    queue = [];\r\n    has = {};\r\n    pending = false;\r\n}\r\nexport function queueWatcher(watcher) {\r\n    let id = watcher.id;\r\n    if (has[id] === undefined) {\r\n        queue.push(watcher);\r\n        has[id] = true;\r\n        if (!pending) {\r\n            pending = true;\r\n            nextTick(flushSchedularQueue);\r\n        }\r\n    }\r\n}\r\nlet cbs = [];\r\nlet waiting = false;\r\nfunction nextTick(cb) {\r\n    cbs.push(cb)\r\n    if (!waiting) {\r\n        waiting = true;\r\n        Promise.resolve().then(flushCallbacks)\r\n    }\r\n}\r\nfunction flushCallbacks() {\r\n    for (let i = 0; i < cbs.length; i++) {\r\n        let callback = cbs[i];\r\n        callback();\r\n    }\r\n    waiting = false;\r\n    cbs = [];\r\n}\r\nVue.prototype.$nextTick = nextTick","import { popTarget, pushTarget } from \"./dep\";\r\nimport { queueWatcher } from \"./queueWatcher\";\r\n\r\nlet id = 0\r\nclass Watcher {\r\n    constructor(vm, exprOrFn, cb, options) {\r\n        this.vm = vm;\r\n        this.cb = cb;\r\n        this.getter = exprOrFn;\r\n        this.options = options;\r\n        this.deps = [];\r\n        this.depsId = new Set();\r\n        this.id = id++;\r\n        this.get();\r\n    }\r\n    get() {\r\n        pushTarget(this)\r\n        this.getter()\r\n        popTarget()\r\n    }\r\n    addDep(dep) {\r\n        if (!this.depsId.has(dep)) {\r\n            this.deps.push(dep)\r\n            this.depsId.add(dep.id)\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n    run(){\r\n        this.get()\r\n    }\r\n    update(){\r\n        queueWatcher(this)\r\n        // this.run()\r\n    }\r\n}\r\n\r\n\r\nexport default Watcher","export function patch(oldVnode, vnode) {\r\n    const isRealElement = oldVnode.nodeType;\r\n    if (isRealElement) {\r\n        // 初次渲染\r\n        const oldElm = oldVnode;\r\n        const parentElm = oldElm.parentNode;\r\n        let el = createElm(vnode);\r\n        parentElm.insertBefore(el, oldElm.nextSibling)\r\n        parentElm.removeChild(oldElm);\r\n        return el\r\n    } else {\r\n        // diff算法\r\n    }\r\n\r\n}\r\nfunction createElm(vnode) {//根据虚拟节点创建真实节点\r\n    let { tag, children, key, data, text, vm } = vnode;\r\n    if (typeof tag === 'string') {\r\n        // 这里也可能是一个自定义组件\r\n        vnode.el = document.createElement(tag)\r\n        updateProperties(vnode);\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        })\r\n    } else {\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el;\r\n}\r\nfunction updateProperties(vnode) {\r\n    let newProps = vnode.data || {}\r\n    let el = vnode.el;\r\n    for (const key in newProps) {\r\n        if (key == 'style') {\r\n            for (let styleName in newProps.style) {\r\n                el.style[styleName] = newProps.style[styleName]\r\n            }\r\n        } else if (key === 'class') {\r\n            el.className = newProps.class\r\n        } else {\r\n            el.setAttribute(key, newProps[key]);\r\n        }\r\n    }\r\n}","import Watcher from \"./observer/watcher\"\r\nimport { patch } from './vdom/patch'\r\nexport function lifecycleMixin(Vue) {\r\n    Vue.prototype._update = function (vnode) {\r\n\r\n        // 将虚拟节点转换成真实的dom\r\n        const vm = this;\r\n        // 首次渲染 需要用虚拟节点 来更新真实的dom元素\r\n\r\n        // 初始化渲染的时候 会创建一个新节点并且将老节点删掉\r\n\r\n        // 1.第一次渲染完毕后 拿到新的节点，下次再次渲染时替换上次渲染的结果\r\n        vm.$options.el = patch(vm.$options.el, vnode);\r\n\r\n    }\r\n}\r\n\r\nexport function mountComponent(vm) {\r\n    // 默认vue是通过watcher来进行渲染  = 渲染watcher （每一个组件都有一个渲染watcher）\r\n\r\n    let updateComponent = () => {\r\n        vm._update(vm._render()); // 虚拟节点\r\n    }\r\n    new Watcher(vm, updateComponent, () => { }, true); // updateComponent();\r\n}","\r\nconst oldArrayMethods = Array.prototype;\r\n\r\nconst methods = [\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'splice',\r\n    'reverse',\r\n    'sort'\r\n];\r\n\r\nexport const arrayMethods = Object.create(oldArrayMethods);\r\nmethods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n        let result = oldArrayMethods[method].call(this, ...args);\r\n        let inserted\r\n        let ob = this.__ob__\r\n        switch (method) {\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args;\r\n                break;\r\n            case 'splice': // splice(0,1,xxxx)\r\n                inserted = args.slice(2);\r\n            default:\r\n                break;\r\n        }\r\n        if (inserted) ob.observeArray(inserted);\r\n        ob.dep.notify();\r\n        return result;\r\n    }\r\n})","import { arrayMethods } from \"./array\"\r\nimport Dep from \"./dep\";\r\n\r\n\r\nclass Observer {\r\n    constructor(value) {\r\n        this.dep = new Dep()\r\n        Object.defineProperty(value, '__ob__', {\r\n            value: this,\r\n            enumerable: false, // 不能被枚举表示 不能被循环\r\n            configurable: false,// 不能删除此属性\r\n        })\r\n        // console.log(value);\r\n        if (Array.isArray(value)) {\r\n            Object.setPrototypeOf(value, arrayMethods);\r\n            this.observerArray(value)\r\n        } else {\r\n            this.walk(value)\r\n        }\r\n    }\r\n    walk(data) {\r\n        Object.keys(data).forEach(key => {\r\n            defineReactive(data, key, data[key])\r\n        })\r\n    }\r\n    observerArray(data) {\r\n        for (const item of data) {\r\n            observer(item)\r\n        }\r\n    }\r\n}\r\n\r\nfunction dependArray(value) {\r\n    for (let i = 0; i < value.length; i++) {\r\n        let current = value[i];\r\n        current.__ob__ && current.__ob__.dep.depend(); // 让里层的和外层收集的都是同一个watcher\r\n        if (Array.isArray(current)) {\r\n            dependArray(current);\r\n        }\r\n    }\r\n}\r\nexport function defineReactive(data, key, value) {\r\n    let childOb = observer(value); // 对结果递归拦截\r\n    let dep = new Dep()\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            if (Dep.target) {\r\n                dep.depend();\r\n                if (childOb) { // 如果对数组取值 会将当前的watcher和数组进行关联\r\n                    childOb.dep.depend();\r\n                    if (Array.isArray(value)) {\r\n                        dependArray(value);\r\n                    }\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        set(newVal) {\r\n            if (newVal === value) return\r\n            observer(newVal)\r\n            value = newVal;\r\n            dep.notify()\r\n        }\r\n    })\r\n}\r\n\r\nexport function observer(data) {\r\n    if (typeof data !== 'object' || data === null) return\r\n    if (data.__ob__) return\r\n    return new Observer(data)\r\n}","import { observer } from \"./observer/index\";\r\n\r\n\r\n\r\nexport function initState(vm) {\r\n    const options = vm.$options\r\n    if (options.data) {\r\n        initData(vm)\r\n    }\r\n}\r\nfunction initData(vm) {\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data;\r\n    for (const key in data) {\r\n        proxy(vm, '_data', key)\r\n    }\r\n    observer(data)\r\n}\r\nfunction proxy(vm, source, key) {\r\n    Object.defineProperty(vm, key, {\r\n        get() {\r\n            return vm[source][key]\r\n        },\r\n        set(newVal) {\r\n            if (vm[source][key] === newVal) return\r\n            vm[source][key] = newVal\r\n        }\r\n    })\r\n}","import { compileToFunctions } from \"./compiler/index\";\r\nimport { mountComponent } from \"./lifecycle\";\r\nimport { initState } from \"./state\";\r\n\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this;\r\n        vm.$options = options;\r\n        initState(vm)\r\n        if (vm.$options.el) {\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function (el) {\r\n        el = document.querySelector(el)\r\n        const vm = this;\r\n        const options = vm.$options;\r\n        vm.$options.el = el;\r\n        // 如果有render 就直接使用render\r\n        // 没有render 看有没有template属性\r\n        // 没有template 就接着找外部模板\r\n        if (!options.render) {\r\n            let template = options.template;\r\n            if (!template && el) {\r\n                template = el.outerHTML; // 火狐不兼容 document.createElement('div').appendChild('app').innerHTMl\r\n            }\r\n            // 如何将模板编译成render函数\r\n            const render = compileToFunctions(template); // compileToFunctions\r\n            options.render = render;\r\n        }\r\n        mountComponent(vm)\r\n    }\r\n}\r\n","export function createElement(vm, tag, data = {}, ...children) {\r\n    return vnode(vm, tag, data, data.key, children, undefined);\r\n}\r\nexport function createTextVnode(vm, text) {\r\n    return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\nfunction vnode(vm, tag, data, key, children, text) {\r\n    return {\r\n        vm,\r\n        tag,\r\n        children,\r\n        data,\r\n        key,\r\n        text\r\n    }\r\n}","import { createElement, createTextVnode } from \"./vdom/index.js\"\r\n\r\nexport function renderMixin(Vue) {\r\n    Vue.prototype._c = function (...args) { // 创建元素的虚拟节点\r\n        return createElement(this, ...args);\r\n    }\r\n    Vue.prototype._v = function (text) { // 创建文本的虚拟节点\r\n        return createTextVnode(this, text);\r\n    }\r\n    Vue.prototype._s = function (val) { // 转化成字符串\r\n        return val == null ? '' : (typeof val == 'object') ? JSON.stringify(val) : val\r\n    }\r\n    Vue.prototype._render = function () {\r\n        const vm = this;\r\n        let render = vm.$options.render;\r\n        let vnode = render.call(vm)\r\n        return vnode\r\n    }\r\n}","import { initMixin } from \"./init\"\r\nimport { lifecycleMixin } from \"./lifecycle\"\r\nimport { renderMixin } from \"./render\"\r\n\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\ninitMixin(Vue)\r\nlifecycleMixin(Vue)\r\nrenderMixin(Vue)\r\nexport default Vue"],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","obj","value","split","forEach","item","key","JSON","stringify","slice","genChildren","el","children","map","child","gen","join","node","type","generate","text","test","tokens","match","index","lastIndex","exec","push","trim","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","createASTElement","parent","root","currentParent","stack","start","tagName","element","end","pop","chars","replace","advance","n","substring","parseStartTag","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunctions","template","ast","render","fn","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","has","queue","pending","flushSchedularQueue","run","queueWatcher","undefined","nextTick","cbs","waiting","cb","Promise","resolve","then","flushCallbacks","callback","Vue","prototype","$nextTick","Watcher","vm","exprOrFn","options","getter","deps","depsId","Set","get","dep","add","addSub","patch","oldVnode","vnode","isRealElement","nodeType","oldElm","parentElm","parentNode","createElm","insertBefore","nextSibling","removeChild","data","document","createElement","updateProperties","appendChild","createTextNode","newProps","styleName","style","className","setAttribute","lifecycleMixin","_update","$options","mountComponent","updateComponent","_render","oldArrayMethods","Array","methods","arrayMethods","Object","create","method","args","result","call","inserted","ob","__ob__","observeArray","notify","Observer","defineProperty","enumerable","configurable","isArray","setPrototypeOf","observerArray","walk","keys","defineReactive","observer","dependArray","current","depend","childOb","set","newVal","initState","initData","_data","proxy","source","initMixin","_init","$mount","querySelector","outerHTML","createTextVnode","renderMixin","_c","_v","_s","val"],"mappings":"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"}